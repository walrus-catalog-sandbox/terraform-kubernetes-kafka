openapi: 3.0.3
info:
  title: OpenAPI schema for template terraform-kubernetes-kafka
components:
  schemas:
    variables:
      required: 
      - engine_version
      type: object
      properties:
        context:
          title: Context
          type: object
          description: |
            Receive contextual information. When Walrus deploys, Walrus will inject specific contextual information into this field.
          default: {}
          nullable: true
          additionalProperties:
            type: object
            x-walrus-ui:
              colSpan: 12
          x-walrus-ui:
            colSpan: 12
            group: Advanced
            hidden: true
            order: 1
        infrastructure:
          title: Infrastructure
          type: object
          description: |
            Specify the infrastructure information for deploying.
          default: {}
          nullable: true
          properties:
            domain_suffix:
              description: |
                Specify the domain name of the Kubernetes cluster.
              default: cluster.local
              nullable: true
              title: Domain Suffix
              type: string
              x-walrus-ui:
                order: 3
            image_registry:
              description: |
                Specify the image registry to pull the bitnami/kafka image, default is `registry-1.docker.io`.
              default: registry-1.docker.io
              nullable: true
              title: Image Registry
              type: string
              x-walrus-ui:
                order: 2
            namespace:
              title: Namespace
              type: string
              nullable: true
              x-walrus-ui:
                hidden: true
                order: 1
          x-walrus-ui:
            colSpan: 12
            group: Advanced
            order: 2
        engine_version:
          title: Engine Version
          type: string
          description: |
            Specify the deployment engine version, select from https://hub.docker.com/r/bitnami/kafka/tags.
          default: "3.6"
          x-walrus-ui:
            group: Basic
            order: 3
        username:
          title: Username
          type: string
          description: |
            Specify the account username. The username must be 2-16 characters long and start with lower letter, combined with number, or symbol: _.
          default: user
          nullable: true
          maxLength: 16
          minLength: 2
          x-walrus-ui:
            group: Basic
            order: 4
        password:
          title: Password
          type: string
          description: |
            Specify the account password. The password must be 8-32 characters long and start with any letter, number, or symbols: ! # $ % ^ & * ( ) _ + - =.
            If not specified, it will generate a random password.
          nullable: true
          format: password
          writeOnly: true
          maxLength: 32
          minLength: 8
          x-walrus-ui:
            group: Basic
            order: 5
        resources:
          title: Resources
          type: object
          description: |
            Specify the computing resources.
          default:
            cpu: 0.25
            memory: 1024
          nullable: true
          properties:
            cpu:
              description: |
                Specify the cpu resources. Unit is core.
              default: 0.25
              minimum: 0.1
              nullable: true
              title: Cpu(Core)
              type: number
              x-walrus-ui:
                order: 1
            memory:
              description: |
                Specify the memory resources. Unit is megabyte.
              default: 1024
              minimum: 512
              nullable: true
              title: Memory(MiB)
              type: number
              x-walrus-ui:
                order: 2
          x-walrus-ui:
            colSpan: 12
            group: Basic
            order: 6
        storage:
          title: Storage
          type: object
          description: |
            Specify the storage resources.
          nullable: true
          properties:
            class:
              description: |
                Specify the storage class. If not specified, it will use the default provisioner.
              title: Class
              type: string
              nullable: true
              x-walrus-ui:
                order: 1
            size:
              description: |
                Specify the storage size. Unit is megabyte.
              default: 20480
              minimum: 1024
              nullable: true
              title: Size(MiB)
              type: number
              x-walrus-ui:
                order: 2
          x-walrus-ui:
            colSpan: 12
            group: Basic
            order: 7
        seeding:
          title: Seeding
          type: object
          description: |
            Specify the configuration to kafka provisioning.
          nullable: true
          properties:
            partitions:
              description: |
                Specify the parition number of the seeding topic.
              default: 1
              minimum: 1
              nullable: true
              title: Partitions
              type: number
              x-walrus-ui:
                order: 2
            replication_factor:
              description: |
                Specify the replication factor of the seeding topic.
              default: 1
              minimum: 1
              nullable: true
              title: Replication Factor
              type: number
              x-walrus-ui:
                order: 3
            topics:
              description: |
                Specify the seeding topics.
              nullable: true
              items:
                type: string
              title: Topics
              type: array
              x-walrus-ui:
                colSpan: 12
                order: 1
          x-walrus-ui:
            colSpan: 12
            group: Basic
            order: 8
      x-walrus-ui:
        groupOrder:
          - Basic
          - Advanced
